<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />

    <title>Tassin â€“ Tractage</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#1e40af" />

    <!-- IcÃ´nes -->
    <link rel="apple-touch-icon" href="icon-192.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="favicon-32.png"
    />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      crossorigin="anonymous"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <div id="map"></div>
      <aside class="panel">
        <a href="#!/up">
          <img
            class="side-logo"
            fetchpriority="high"
            width="567"
            height="204"
            src="https://unnouveausoufflepourtassin.fr/wp-content/uploads/2025/10/site-construction.webp"
            alt=""
            srcset="
              https://unnouveausoufflepourtassin.fr/wp-content/uploads/2025/10/site-construction.webp          567w,
              https://unnouveausoufflepourtassin.fr/wp-content/uploads/2025/10/site-construction-300x108.webp 300w
            "
            sizes="(max-width: 567px) 100vw, 567px"
          />
        </a>

        <div class="muted">
          Choisis une rue, renseigne le statut, valide.
        </div>

        <a
          id="externalLink"
          href="https://jonathanpothin.github.io/NSPT-Agenda/"
          target="_blank"
        >
          ðŸ“„ Agenda NSPT
        </a>

        <div class="card">
          <div class="legend">
            <span><span class="dot red"></span>Ã€ faire</span>
            <span><span class="dot yellow"></span>En cours</span>
            <span><span class="dot green"></span>Fait</span>
          </div>
        </div>

        <div class="card">
          <div class="search">
            <input id="search" type="text" placeholder="Rechercher une rueâ€¦" />
            <button class="btn secondary" id="btnSearch">Rechercher</button>
          </div>

          <label for="rue">Rue</label>
          <select id="rue"></select>

          <div class="btn-group" style="margin-top: 10px">
            <button class="btn ghost" id="btnAF">
              <span class="dot red"></span>Ã€ faire
            </button>
            <button class="btn ghost" id="btnEC">
              <span class="dot yellow"></span>En cours
            </button>
            <button class="btn" id="btnF">
              <span class="dot green"></span>Fait
            </button>
          </div>
        </div>

        <div class="card">
          <label for="statut">Statut</label>
          <select id="statut">
            <option>Ã€ faire</option>
            <option>En cours</option>
            <option>Fait</option>
          </select>

          <div class="row">
            <div>
              <label for="benevole">BÃ©nÃ©vole</label>
              <input id="benevole" type="text" placeholder="PrÃ©nom Nom" />
            </div>
            <div>
              <label for="date">Date</label>
              <input id="date" type="date" />
            </div>
          </div>

          <label for="remarques">Remarques</label>
          <textarea
            id="remarques"
            placeholder="Remarques (codes, Ã©tages, etc.)"
          ></textarea>

          <div class="btn-group">
            <button class="btn" id="btnSave">Valider</button>
          </div>
          <div id="msg" class="muted" style="margin-top: 6px">PrÃªt.</div>
        </div>
      </aside>
    </div>

    <!-- Bouton d'installation PWA -->
    <div id="pwaInstallBtn" class="pwa-install hidden">
      ðŸ“± Installer lâ€™application
    </div>

    <!-- Leaflet JS -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      crossorigin="anonymous"
    ></script>

    <!-- Supabase JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>

    <!-- JS -->
    <script src="app.js"></script>

    <!-- Service worker -->
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("./service-worker.js")
          .then(() => console.log("Service worker installÃ© !"))
          .catch((err) => console.error("Erreur SW :", err));
      }
    </script>
  </body>
</html>
